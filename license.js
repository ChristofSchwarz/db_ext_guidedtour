define([],function(){function t(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return Math.abs(e)}function e(e,n,r,i){var o={valid:!1,expiry:null,licenseOk:!1};if(e&&n){const a=function(e,n){const r=t(e),i=t(n);var o,a,s=[];for(o=0;o<e.length;o++)for(a=11;a<=36;a++)s.length<304&&s.push((Math.E.toString().substr(2,8)*e.charCodeAt(o)+r+i).toString(a));return s.join("")}(r,i),s=Math.sqrt(parseInt(n,8)-1708),c=(s/2-50)%12;o.expiry=1*new Date(s<100?9999:2022+Math.floor((s-100)/24),s>=100?Math.floor(c):11,s<100?30:c%1*30),o.expiry+=86399999,o.licenseOk=a.substr(s||1e6,7)==(1*e).toString(36),o.valid=o.licenseOk&&Date.now()<=o.expiry}return o}return{chkLicenseJson:function(t,n,r,i){const o=r||location.hostname;var a,s,c,l='<p>Checking license for hostname "'+o+'"</p><br><table><tr><th>Domain</th><th>Applies?</th><th>License No.</th><th>CheckSum</th><th>Expires</th><th>Valid?</th></tr>',h=!1,d=!1;try{const r=JSON.parse(t);for(const t in r){const i=t==(a=o,s=t,void 0,c=new RegExp("^"+s.replace(/\./g,"\\.").replace(/\*/g,".*")+"$"),null==a.match(c)?a:s);h=h||i;const p=e(r[t][0],r[t][1],t,n);d=d||p.valid,l+=`<tr><td>${t}</td><td>${i}</td><td>${r[t][0]}</td><td>${r[t][1]}</td>`+`<td>${new Date(p.expiry).toDateString()}</td><td>${p.valid}</td></tr>`}return l+="</table><br><p>"+(d&&h?"<strong>&#10003;</strong> You have a valid and applicable license":"&#10060; Your license is not valid or not applicable")+"</p>",i?l:d&&h}catch(t){return!!i&&"<p>Error: This isn't a valid license.</p>"}}}});
